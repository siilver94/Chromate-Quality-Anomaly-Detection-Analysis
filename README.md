# 품질 이상탐지, 진단(크로메이트) AI 데이터 분석(Quality Anomaly Detection and Diagnosis in Chromate Process)


<code><img height = "350"
src = https://github.com/user-attachments/assets/548500c9-e74d-4aed-8387-137b83d56254></code>

<br/>

## 프로젝트 개요

이 프로젝트는 크로메이트 공정에서 발생하는 품질 불량 문제를 머신러닝과 딥러닝 알고리즘을 활용해 탐지하고 예측하는 데 초점을 맞추고 있습니다. Decision Tree와 **Convolutional Neural Network (CNN)** 을 사용하여 데이터를 분석하였으며, 이 과정을 통해 제조 공정에서 발생할 수 있는 문제를 사전에 예측하고, 품질 관리 프로세스를 최적화하는 방법을 제시합니다.

이 프로젝트는 제가 데이터 분석가로서 처음으로 맡은 실무 프로젝트로, 기초적인 데이터 전처리부터 고급 머신러닝 모델링까지 전 과정을 경험했습니다. 이를 통해 데이터를 기반으로 문제를 해결하는 데 있어 필수적인 스킬들을 쌓을 수 있었습니다.

- 분석 대상: 크로메이트 공정의 pH, 온도, 전압 및 이미지 데이터
  
- 목적: 품질 보증 및 이상 탐지를 통한 비용 절감과 생산성 향상
  
- 프로젝트 기간: 2024년 8월

<br/>

## 사용된 기술

- 프로그래밍 언어: `Python`
- 데이터 분석 및 머신러닝 라이브러리:
  - `Pandas`, `NumPy`, `Scikit-learn`, `Seaborn`, `Matplotlib`, `TensorFlow`, `AutoKeras`
- 딥러닝 프레임워크: `TensorFlow`, `Keras`
- 환경: `Jupyter Notebook`, `Anaconda`

<br/>
  
## 데이터셋 설명

이 프로젝트에서 사용된 데이터는 KAMP (Korea AI Manufacturing Platform)에서 제공하는 **품질 이상탐지, 진단(크로메이트) AI 데이터셋**입니다. 이 데이터셋은 크로메이트 공정의 다양한 변수와 결과물을 포함하고 있어, 공정의 품질을 정밀하게 예측하는 데 중요한 역할을 합니다.

- 데이터 형식: CSV 및 PNG
- 총 데이터 수: 302,115개 (CSV), 1,452개 (이미지)
- 주요 변수:
  - Index, LoT, Time, pH, Temp, Voltage
- 이미지 데이터: 정상 이미지 1,378개, 불량 이미지 74개

<br/>

### 데이터의 특징 및 처리 방법

- 데이터 수집 방법: PLC 및 센서를 통해 실시간으로 데이터를 수집하며, 이를 CSV 파일로 저장합니다. 또한, 제품 이미지도 함께 수집하여 품질 분석에 활용했습니다.
- 데이터 전처리: 결측치 처리, 이상치 탐지 및 제거, 데이터 스케일링을 통해 모델링에 적합한 형태로 데이터를 정제했습니다.


<br/>

## 모델링 및 분석 방법

#### 1. 데이터 전처리

- 결측치 처리: dropna()와 fillna()를 사용하여 결측치를 제거하거나 대체했습니다.
- 이상치 탐지 및 제거: Tukey Fences와 Z Score를 사용해 이상치를 탐지하고, 적절히 처리했습니다.
- 데이터 스케일링: 모델 성능을 높이기 위해 데이터를 스케일링했습니다.
#### 2. 모델 선택 및 훈련

- **Decision Tree:**

  - 주요 공정 데이터(pH, Temp, Voltage)를 사용하여 품질 예측 모델을 구축했습니다.
  - max_depth를 조정하여 과적합을 방지하고, 해석 가능한 모델을 만들었습니다.
    
- **CNN:**

  - 이미지 데이터를 사용하여 품질 이상을 탐지하는 CNN 모델을 구축했습니다.
  - AutoKeras를 활용해 최적의 CNN 모델을 자동으로 탐색하고, 학습을 진행했습니다.
    
### 3. 모델 평가

**평가 지표:**
- 정확도(Accuracy): 모델이 얼마나 정확하게 품질을 예측하는지 평가했습니다.
- 정밀도(Precision): 모델이 예측한 긍정 클래스 중 실제로 긍정인 비율을 측정했습니다.
- 재현율(Recall): 실제 긍정 클래스 중 모델이 긍정으로 예측한 비율을 평가했습니다.
- F1-Score: 정밀도와 재현율의 조화를 평가하여 모델의 종합 성능을 측정했습니다.
- Confusion Matrix: 모델의 성능을 시각적으로 분석하여 오분류된 항목을 확인했습니다.
  
## 결과 및 성능 평가

#### Decision Tree:

- 정확도(Accuracy): 품질 예측에서 **XX%**의 정확도를 달성했습니다.
- 모델 해석 가능성: Decision Tree는 모델의 각 결정 기준을 시각화할 수 있어, 공정 중 품질 저하의 원인을 파악하는 데 유용했습니다.
  
#### CNN:

- 정확도(Accuracy): 이미지 품질 탐지에서 **YY%**의 정확도를 달성했습니다.
- 일반화 성능: 데이터 증강 및 드롭아웃 기법을 통해 모델의 일반화 성능을 높였으며, 과적합을 방지했습니다.
  
## 결론 
이 프로젝트를 통해 크로메이트 공정에서 발생하는 품질 문제를 효과적으로 예측할 수 있음을 확인했습니다. 머신러닝과 딥러닝 기법을 결합하여 공정 데이터를 분석함으로써, 실시간 품질 모니터링 시스템 구축의 가능성을 제시했습니다. 
이를 통해 생산성 향상과 비용 절감이라는 실질적인 비즈니스 가치를 도출할 수 있었습니다.

<br/>

---

<br/>

## 배움과 도전

#### 느낀 점과 배움
데이터 분석가로서 첫 프로젝트를 진행하면서, 데이터의 중요성을 깊이 깨닫게 되었습니다. 특히, 데이터 전처리의 중요성을 배우게 되었고, 전처리가 모델 성능에 미치는 영향을 직접 경험할 수 있었습니다. 또한, 머신러닝과 딥러닝 모델의 차이점과 각각의 이점을 이해하며, 어떤 상황에서 어떤 모델을 사용하는 것이 더 효과적인지 판단할 수 있게 되었습니다.

#### 도전과 어려움
이 프로젝트에서 가장 큰 어려움은 CNN 모델의 과적합 문제였습니다. 이미지 데이터의 수가 적어 모델이 과적합되는 경향이 있었지만, 데이터 증강 기법을 도입해 이미지 데이터를 늘리고, 드롭아웃(Dropout) 레이어를 추가해 모델의 일반화 성능을 향상시켰습니다.

또한, AutoKeras를 사용하면서 모델 튜닝의 어려움도 겪었습니다. 자동화된 툴이 주는 편리함에도 불구하고, 최적의 하이퍼파라미터를 찾는 것이 쉽지 않았습니다. 이를 극복하기 위해 Cross-Validation을 활용해 모델 성능을 검증하며, 튜닝을 반복하는 과정을 통해 안정적인 모델을 구축할 수 있었습니다.

#### 회고와 개선
프로젝트를 통해 데이터의 질이 분석 결과에 얼마나 큰 영향을 미치는지를 깨닫게 되었습니다. 향후 프로젝트에서는 데이터 수집 단계에서부터 품질을 고려하고, 더욱 체계적인 데이터 전처리 파이프라인을 구축하고자 합니다. 또한, 딥러닝 모델의 경우 더 많은 데이터가 필요하다는 점을 인식하고, 데이터 증강 또는 더 큰 데이터셋 사용을 고려하여 모델 성능을 높이기 위한 방법을 지속적으로 탐구할 계획입니다.

## 향후 계획 및 개선 사항

- 데이터 증강: 부족한 이미지 데이터를 증강하여 모델 성능을 향상시킬 계획입니다.
- 모델 튜닝: Hyperparameter Tuning을 통해 모델 성능을 최적화할 계획입니다.
- 자동화 파이프라인 구축: 데이터 수집부터 모델 학습까지의 자동화된 파이프라인을 구축할 계획입니다.
- 더 큰 데이터셋 활용: 모델 성능을 더 높이기 위해 더 큰 규모의 데이터셋을 사용할 계획입니다.

<br/>
  
### 참고 자료
KAMP 제조 AI 데이터셋: [KAMP AI Dataset](https://www.kamp-ai.kr/)

## KAMP 제조AI데이터셋 활용 권한
중소벤처기업부, Korea AI Manufacturing Platform(KAMP), 품질 이상탐지, 진단(크로메이트)
AI 데이터셋, KAIST (주)에이비에이치, (주)임픽스), 2021.12.27., www.kamp-ai.kr
